# Internationalization (i18n)

This project supports multiple languages using Next.js App Router's built-in internationalization features.

## Supported Languages

- English (en) - Default
- Thai (th)

## File Structure

```
src/i18n/
├── config.ts          # Locale configuration
├── translations.ts    # Translation strings
├── metadata.ts        # Metadata generation functions
└── index.ts          # Exports
```

## How It Works

### 1. Automatic Language Detection

The middleware automatically detects the user's preferred language from their browser settings and redirects them to the appropriate locale:

- English speakers → `/en`
- Thai speakers → `/th`

### 2. URL Structure

All routes are prefixed with the locale:

- `/en` - English home page
- `/th` - Thai home page
- `/en/sushiro` - English Sushiro page
- `/th/sushiro` - Thai Sushiro page

### 3. Metadata

Each page has localized metadata (title, description, Open Graph tags) based on the current locale.

## Adding New Translations

### 1. Update `translations.ts`

Add your new text strings to both `en` and `th` objects:

```typescript
export const translations = {
  en: {
    metadata: {
      // ... existing
      newPage: {
        title: "New Page",
        description: "New page description",
      },
    },
  },
  th: {
    metadata: {
      // ... existing
      newPage: {
        title: "หน้าใหม่",
        description: "คำอธิบายหน้าใหม่",
      },
    },
  },
};
```

### 2. Create Metadata Function in `metadata.ts`

```typescript
export function generateNewPageMetadata(locale: Locale): Metadata {
  const t = getTranslation(locale);
  const baseUrl = "https://party-calculator.vercel.app";

  return {
    title: t.metadata.newPage.title,
    description: t.metadata.newPage.description,
    alternates: {
      canonical: `${baseUrl}/${locale}/new-page`,
      languages: {
        en: `${baseUrl}/en/new-page`,
        th: `${baseUrl}/th/new-page`,
      },
    },
  };
}
```

### 3. Use in Your Page Layout

```typescript
import { generateNewPageMetadata } from "@/i18n/metadata";

export async function generateMetadata({
  params,
}: {
  params: Promise<{ locale: Locale }>;
}): Promise<Metadata> {
  const { locale } = await params;
  return generateNewPageMetadata(locale);
}
```

## Adding a New Language

### 1. Update `config.ts`

```typescript
export const locales = ["en", "th", "ja"] as const; // Add "ja" for Japanese

export const localeNames: Record<Locale, string> = {
  en: "English",
  th: "ไทย",
  ja: "日本語", // Add Japanese
};
```

### 2. Add Translations

Add all translation strings for the new language in `translations.ts`.

### 3. Update Metadata Functions

Update the `alternateLocale` and `languages` in `metadata.ts` to include the new locale.

## Best Practices

1. **Always use translation keys**: Don't hardcode text strings in your components
2. **Keep translations organized**: Group related translations together
3. **Test both languages**: Make sure to test your changes in both English and Thai
4. **SEO optimization**: Ensure all metadata is properly translated
5. **Consistent terminology**: Use the same translations for the same terms across the app

## Development

To add locale parameter to your page components:

```typescript
export default async function YourPage({
  params,
}: {
  params: Promise<{ locale: Locale }>;
}) {
  const { locale } = await params;
  const t = getTranslation(locale);

  return <div>{t.metadata.title}</div>;
}
```

## Testing

1. Visit `http://localhost:3000/en` for English
2. Visit `http://localhost:3000/th` for Thai
3. Visit `http://localhost:3000` to test automatic language detection
